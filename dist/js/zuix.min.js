/* zuix.js v1.2.5 25.11.02 23:11:21 */

/*! For license information please see zuix.min.js.LICENSE.txt */
var zuix;!function(){var t={51:function(t){const e=Object.freeze({zModel:"z-model",zBind:"z-bind",zBehavior:"z-behavior",zOn:"z-on",zCss:"z-css",zComponent:"z-component",zContext:"z-context",zField:"z-field",zLazy:"z-lazy",zLoad:"z-load",zLoaded:"z-loaded",zOptions:"z-options",zUsing:"z-using",zPriority:"z-priority",zView:"z-view",zuixLoaded:"zuix-loaded",zReady:"z-ready",resourceType:{view:"view",controller:"ctrl",file:"file"},cssIdPrefix:"z-css-"});t.exports=e},132:function(t){"use strict";function e(t){t.init=this.onInit.bind(this),t.create=this.onCreate.bind(this),t.dispose=this.onDispose.bind(this),t.update=(t,e,n,o,i)=>this.onUpdate.call(this,t,e,n,o,i),Object.assign(this,t),Object.assign(this,Object.getPrototypeOf(t))}e.prototype.onInit=function(){},e.prototype.onCreate=function(){},e.prototype.onDispose=function(){},e.prototype.onUpdate=function(t,e,n,o,i){},t.exports=e},157:function(t,e,n){"use strict";t.exports=n(283)()},189:function(t,e,n){"use strict";const o=n(746),i=o("ComponentContext.js"),r=n(51),s=n(778),l=n(374),c=n(452);let a=null;const u=[],h=[],d=(t,e)=>{e=e.observableTarget||e;const n=l.isNoU(e.value)?l.isNoU(e.innerHTML)?e:e.innerHTML:e.value;switch(t.tagName.toLowerCase()){case"img":t.src=l.isNoU(e.src)?l.isNoU(e.innerHTML)?e:e.innerHTML:e.src;break;case"a":t.href=l.isNoU(e.href)?l.isNoU(e.innerHTML)?e:e.innerHTML:e.getAttribute("href"),l.isNoU(e.href)||l.isNoU(e.innerHTML)||""===e.innerHTML.trim()||0===s(e).find(l.dom.queryAttribute(r.zField)).length()&&s(t).html("").append(document.createTextNode(e.innerHTML));break;case"input":switch(t.type){case"checkbox":t.checked=n;break;case"radio":t.value==n&&(t.checked=!0);break;default:t.value=n}break;case"select":s.each(t.options,(e,o)=>{if(o.value==n)return t.selectedIndex=e,!1});break;default:const o=l.isNoU(e.innerHTML)?document.createTextNode(e):e.innerHTML;s(t).html("").append(o)}},p=(t,e,n,o,i)=>{o&&!t._disposed&&o.call(e,n,i,e,function(r){if(!t._disposed){const s=n.get().__zuix_refreshTimeout;s&&h[s]&&clearTimeout(h[s]),n.get().__zuix_refreshTimeout=setTimeout(function(){p(t,e,n,o,i)},r||500)}})};function f(t,e,n){return a=t,this.contextId=null==e||null==e.contextId?null:e.contextId,this.componentId=null,Object.defineProperty(this,"handlers",{enumerable:!1,writable:!0,value:{refresh:function(t,e,n,o){}}}),Object.defineProperty(this,"trigger",{enumerable:!1,writable:!0,value:(t,e,o)=>{n&&n(t,e,o)}}),Object.defineProperty(this,"_options",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_container",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_model",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_view",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_css",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_style",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_controller",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"behavior",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_eventMap",{enumerable:!1,writable:!0,value:[]}),Object.defineProperty(this,"_behaviorMap",{enumerable:!1,writable:!0,value:[]}),Object.defineProperty(this,"_fieldCache",{enumerable:!1,writable:!0,value:[]}),Object.defineProperty(this,"_c",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(this,"_modelListener",{enumerable:!1,writable:!0}),this._modelListener=Object.assign({context:null,get:function(t,e,n,o){},set:function(t,e,n,o,i){const s=this.context.$;if(t instanceof Element&&(o=o.split(".")[0],n=t),"function"==typeof n){let t=s.find(l.dom.queryAttribute(r.zBind,o));return null==t.get()&&(t=s.find(l.dom.queryAttribute(r.zField,o))),void p(this.context,s,t,n,e)}const c=t=>{null!=t.get()&&t.each((t,e)=>d(e,n))};if(s.get()){c(s.find(l.dom.queryAttribute(r.zBind,o))),c(s.find(l.dom.queryAttribute(r.zField,o)));const a=this.context._c;a&&a.update&&l.catchContextError(this.context,()=>{a.update(t,e,n,o,i)})}}},{context:this}),Object.defineProperty(this,"_viewObserver",{enumerable:!1,writable:!0,value:new c(this)}),Object.defineProperty(this,"_disposed",{enumerable:!1,writable:!0,value:!1}),Object.defineProperty(this,"#",{enumerable:!1,writable:!0,value:{}}),Object.defineProperty(this,"_",{enumerable:!1,writable:!0,value:{}}),Object.defineProperty(this,"_refreshHandler",{enumerable:!1,writable:!0}),Object.defineProperty(this,"_dependencyResolver",{enumerable:!1,writable:!0}),this.options(e),this}f.prototype.dispose=function(){if(this._disposed)return;this._disposed=!0,this._viewObserver.stop(),l.dom.getShadowRoot(this._container||this._view)&&this.style(null),this.model(null),this._c&&(this._c.view()&&(this._c.trigger("component:dispose",this._c.view(),!0),this._c.view().attr(r.zComponent,null).attr(r.zContext,null).attr(r.zLoad,null).attr(r.zLoaded,null).attr(r.zReady,null).attr(r.resourceType.view,null).attr(r.resourceType.controller,null).attr(r.resourceType.file,null).attr(this.getCssId(),null),this._c.view().reset(),this._c._fieldCache&&s.each(this._c._fieldCache,function(t,e){e.reset()})),this._c.dispose&&l.catchContextError(this,()=>{this._c.dispose.call(this,this)})),this._c&&this._c._childNodes.length>0&&(this._c.view().html(""),this._c.restoreView());const t=a.dumpContexts(),e=t.indexOf(this);-1!==e&&t.splice(e,1)},f.prototype.container=function(t){return null==t?this._container:(t instanceof s.ZxQuery&&(t=t.get()),this._container=t,this)},f.prototype.view=function(t){if(void 0===t)return this._view;if(null===t)throw new Error("View cannot be set to null.");if(t instanceof s.ZxQuery&&(t=t.get()),t===this._view)return this;this._viewObserver.stop();const e=this.getCssId();if(null!=this._view){const t="*"+l.dom.cssNot(r.zLoad).getAll();s(this._view).attr(e,null).find(t).each(function(t,n){this.attr(e,null)})}const n=t=>{t.find("*").each((t,e,n)=>{for(let t=0;t<e.attributes.length;t++){const o=e.attributes.item(t),i=o.value;if(o.name.length>1&&o.name.startsWith("#")){const t=l.hyphensToCamelCase(o.name.substring(1));null==n.attr(r.zField)&&n.attr(r.zField,t),null==n.attr(r.zBind)&&null!=i&&i.length>0&&n.attr(r.zBind,i)}}})};if(i.t(this.componentId,"view:attach","timer:view:start"),"string"==typeof t){const e={content:t};this.trigger(this,"html:parse",e),t=e.content;const o=s.wrapElement("div",t);null!=o.firstElementChild&&(null!=l.dom.getAttribute(o.firstElementChild,r.zView)?1===o.children.length&&(t=o.firstElementChild.innerHTML):t=o.innerHTML),null!=this._container?(this._view=this._container,this._view.innerHTML+=t):null!=this._view?this._view.innerHTML=t:this._view=o;const i=s(this._view);i.find("script:not([type=jscript])").each((t,e,n)=>{"true"!==n.attr(r.zuixLoaded)&&(n.attr(r.zuixLoaded,"true"),l.catchContextError(this,()=>{Function(e.innerHTML).call(window)},t=>console.error(t)))}),n(i),this.trigger(this,"view:process",i)}else null!=this._container&&"default"!==this.componentId?(this._view=s.wrapElement("div",t.outerHTML).firstElementChild,l.dom.setAttribute(this._view,r.zView,null),this._container.appendChild(this._view),this._view=this._container):this._view=t;const o=s(this._view);return n(o),o.find(l.dom.queryAttribute(r.zLoad,null,l.dom.cssNot(r.zLoaded))).each((t,e,n)=>n.attr(r.zLoaded,"false")),this.checkEncapsulation(),this.modelToView(),i.t(this.componentId,"view:attach","timer:view:stop"),this},f.prototype.field=function(t){const e=a.field(t,this._view,this);return e.on=(t,n,o,i)=>{if("string"==typeof n){const t=n;n=()=>{this._c&&this._c.trigger(t,o,i)}}return s.ZxQuery.prototype.on.call(e,t,n)},e},f.prototype.checkEncapsulation=function(){const t=s(this._view),e=this.getCssId();if(t.length()&&!1!==this._options.css)if(t.attr(e,""),null!=this._container||null!=this._style){const n="*"+l.dom.cssNot(r.zLoad).getAll();t.find(n).each((t,n,o)=>o.attr(e,"")),this._viewObserver.start(),t.attr(r.resourceType.controller,null)}else t.attr(r.resourceType.controller,"")},f.prototype.style=function(t){if(void 0===t)return this._style;const e=this.getCssId();i.t(this.componentId,"view:style","timer:view:start",e);const n=l.dom.getShadowRoot(this._container||this._view);if(null==t||t instanceof Element)this._css=t instanceof Element?t.innerText:t,this._style=s.appendCss(t,this._style,this.componentId+"@"+e,n);else if("string"==typeof t){this._css=t;const o={content:t};this.trigger(this,"css:parse",o),t=o.content;let i="";!0===this.options().resetCss&&(i=":host { all: initial; }");const r="["+e+"]";n&&"default"!==this.componentId||(t=s.wrapCss(r,i+"\n"+t,!0===this.options().encapsulation)),this._style=s.appendCss(t,this._style,this.componentId+"@"+e,n)}return n||this.checkEncapsulation(),i.t(this.componentId,"view:style","timer:view:stop",e),this},f.prototype.model=function(t){return void 0===t||this._model===t||(null!==this._model&&"function"!=typeof this._model&&a.observable(this._model).unsubscribe(this._modelListener),this._model=t,null!=t&&("function"!=typeof t&&(this._model=a.observable(t).subscribe(this._modelListener).proxy),this.modelToView(),null!=this._c&&this._c.update&&l.catchContextError(this,()=>{this._c.update.call(this._c,null,null,null,null,this._c)}))),this._model},f.prototype.controller=function(t){const e=this.componentId;return void 0===t?this._controller:(this._controller="string"==typeof t?a.controller(t,{componentId:e}):t,this._controller.log=o(this.componentId),this)},f.prototype.options=function(t){if(null==t)return this._options;const e=this._options=this._options||{};return Object.assign(e,t),this.componentId=e.componentId||this.componentId,null==u[this.componentId]&&(u[this.componentId]=u.length,u.length++),this.container(e.container),this.view(e.view),"string"==typeof e.css&&this.style(e.css),this.controller(e.controller),this.model(e.model),this},f.prototype.on=function(t,e){return this._c.on(t,e),this},f.prototype.loadCss=function(t){const e=this;t||(t={});let n=e.componentId;t.path&&(n=t.path);let o=a.store("zuix.inlineStyles");if(null==o&&(o=[],a.store("zuix.inlineStyles",o)),null!=o[n])e.style(o[n]),t.success&&t.success.call(e,o[n],e),t.then&&t.then.call(e,e);else{const r=s().find('style[media="#'+n+'"],style[media="'+n+'"]');if(r.length()){const i=r.get(0).innerText;e.style(i),r.detach(),o[n]=i,t.success&&t.success.call(e,i,e),t.then&&t.then.call(e,e)}else{n==e.componentId&&(n+=".css");const o=a.store("settings")?a.store("settings").fetchOptions:void 0;fetch(a.getResourcePath(n),o).then(t=>t.text()).then(n=>{e.style(n),t.success&&t.success.call(e,n,e)}).catch(n=>{i.e(n,e),t.error&&t.error.call(e,n,e)}).finally(()=>{t.then&&t.then.call(e,e)})}}return this},f.prototype.loadHtml=function(t){const e=this;let n=e.componentId;t||(t={}),t.path&&(n=t.path);let o=a.store("zuix.inlineViews");if(null==o&&(o=[],a.store("zuix.inlineViews",o)),null!=o[n])e.view(o[n]),t.success&&t.success.call(e,o[n],e),t.then&&t.then.call(e,e);else{const c=s().find(l.dom.queryAttribute(r.zView,n,l.dom.cssNot(r.zComponent)));if(c.length()){let i,l=c.get(0);if("template"===l.tagName.toLowerCase()?(l=l.cloneNode(!0),i=l.content.querySelectorAll("style")):i=l.querySelectorAll('style[media="#"]'),i)for(const t of i)t.setAttribute("media","#"+e.componentId);o[n]=l.innerHTML,e.view()===l||null!=e.container()&&e.container().contains(l)?(c.attr(r.zView,null),e._view=l,this.trigger(this,"view:process",s(e.view()))):e.view(l.innerHTML),t.success&&t.success.call(e,l.innerHTML,e),t.then&&t.then.call(e,e)}else{const o=t.cext?t.cext:".html";n==e.componentId&&(n+=o);const r=a.store("settings")?a.store("settings").fetchOptions:void 0;fetch(a.getResourcePath(n),r).then(t=>t.text()).then(n=>{e.view(n),t.success&&t.success.call(e,n,e)}).catch(n=>{i.e(n,e),t.error&&t.error.call(e,n,e)}).finally(()=>{t.then&&t.then.call(e,e)})}}return this},f.prototype.viewToModel=function(){i.t(this.componentId,"view:model","timer:vm:start");const t={},e=s(this._view);return e.find(l.dom.queryAttribute(r.zField)).each((n,o,i)=>{if(!a.isDirectComponentElement(e,i))return!0;const s=i.attr(r.zField);t[s]=o}),this._model=a.observable(t).subscribe(this._modelListener).proxy,i.t(this.componentId,"view:model","timer:vm:stop"),this},f.prototype.modelToView=function(){if(i.t(this.componentId,"model:view","timer:mv:start"),null!=this._view){this["#"]={};const t=s(this._view);t.find(l.dom.queryAttribute(r.zField)).each((e,n,o)=>{if(!a.isDirectComponentElement(t,o)&&"true"!==o.attr("inherits"))return!0;let i=o.attr(r.zBind);if(null==i&&(i=o.attr(r.zField)),"function"==typeof this._model)p(this,t,o,this._model,i);else{let e=l.propertyFromPath(this._model,i);const r=l.hyphensToCamelCase(i),s=l.propertyFromPath(this._model,r);null==e&&null!=s&&(i=r,e=l.propertyFromPath(this._model,e)),"function"==typeof e?p(this,t,o,e,i):null!=e&&d(n,e)}}),t.find(l.dom.queryAttribute(r.zField)).each((e,n,o)=>{if(!a.isDirectComponentElement(t,o)&&"true"!==o.attr("inherits"))return!0;let i=o.attr(r.zBind);null==i&&(i=o.attr(r.zField));try{const t=l.hyphensToCamelCase(i);Function("function testName(){ const "+t+' = "test"; }'),this["#"][t]=this.field(i)}catch(t){}})}return i.t(this.componentId,"model:view","timer:mv:stop"),this},f.prototype.getCssId=function(){let t="";return("default"===this.componentId||"string"==typeof this._options.css&&!1===l.dom.getShadowRoot(this._container||this._view))&&(t="_"+this.contextId),r.cssIdPrefix+u[this.componentId]+t},Object.defineProperty(f.prototype,"path",{get:function(){const t=this.componentId,e=t.lastIndexOf("/");return e<0?t:t.substring(0,e+1)}}),Object.defineProperty(f.prototype,"name",{get:function(){const t=this.componentId,e=t.lastIndexOf("/");return e<0?t:t.substring(e+1)}}),Object.defineProperty(f.prototype,"$",{get:function(){return this._c&&this._c.view()}}),t.exports=f},283:function(t,e,n){"use strict";const o=n(746),i=o("Zuix.js"),r=n(374),s=n(778),l=n(604),c=n(549),a=n(189),u=n(360),h=n(132),d=n(686),p=n(979)(),f=n(51);n(612);const m=[],y=[],g={},_=[],b={},v=[],w=function(t){return _[t]||(_[t]=new l(function(t,e,n){S(t,e,n)})),_[t]};let x=[],z=0,C=!1;const L=new c,I=[r.dom.queryAttribute(f.zContext),r.dom.queryAttribute(f.zOptions),r.dom.queryAttribute(f.zModel+",:model"),r.dom.queryAttribute(f.zOn+",:on"),r.dom.queryAttribute(f.zCss+",:css"),r.dom.queryAttribute(f.zBehavior+",:behavior"),r.dom.queryAttribute(f.zUsing+",:using"),r.dom.queryAttribute(f.zReady)];function E(){const t=this;return p.setHost(t),this._store={settings:{fetchOptions:{}},config:{title:"zUIx.js app",baseUrl:"/",resourcePath:"/app/",libraryPath:{"@lib":"https://zuixjs.github.io/zkit/lib/1.2/","@hgui":"https://genielabs.github.io/homegenie-web-ui/app/","@cdnjs":"https://cdnjs.cloudflare.com/ajax/libs/"},"zuixjs.github.io":{resourcePath:"/zuixjs/app",libraryPath:{"@lib":"https://zuixjs.github.io/zkit/lib/1.2/","@hgui":"https://genielabs.github.io/homegenie-web-ui/app/","@cdnjs":"https://cdnjs.cloudflare.com/ajax/libs/"}}},handlers:{sync:function(t,e,n,o){const i=e.attr("@sync")||e.attr(f.zField);e.on("keyup change keydown",function(){const t=e.get();let o=e.value();"checkbox"!==t.type&&"radio"!==t.type||t.checked||n[i]!=o?"checkbox"!==t.type&&"radio"!==t.type||(o=t.checked):o="",n[i]!==o&&(n[i]=o)}),n[i]=e.value()},get:function(e,n,o,i){let r=n.attr("@get");const s=r.split(" as ");r=s[0];const l=s[1]||"result",c=t.runScriptlet(r,n,e);c!==o&&(r="const "+l+" = args; "+n.attr("@set"),t.runScriptlet(r,n,e,c),o=c),i(o)},set:function(e,n,o,i){n.attr("@get")||(t.runScriptlet(n.attr("@set"),n,e),i(o))},"disable-if":function(e,n,o,i){const r=n.attr("@disable-if"),s=t.runScriptlet(r,n,e);s!==o&&(n.attr({disabled:s?"":null}),o=s),i(o)},"hide-if":function(e,n,o,i){const r=n.attr("@hide-if"),s=t.runScriptlet(r,n,e);s!==o&&(s?n.css({visibility:"hidden"}):n.css({visibility:"visible"}),o=s),i(o)},if:function(e,n,o,i){const r=n.attr("@if"),s=t.runScriptlet(r,n,e);s!==o&&(s?t.runScriptlet(n.attr("@then"),n,e):t.runScriptlet(n.attr("@else"),n,e),o=s),i(o)}}},this._fieldCache=[],this}function O(t){return"function"!=typeof t.for&&(t.for=function(e){return g[e]=t,t}),t}function T(t,e,n){n||(n=this),null==n._fieldCache&&(n._fieldCache={});let o=null;return void 0===n._fieldCache[t]?(o=s(e).find(r.dom.queryAttribute(f.zField,t)+",["+CSS.escape("#"+t)+"]"),o.length()&&(n._fieldCache[t]=o,1!==o.length()||o.field||(o.field=t=>T(t,o,o)))):o=n._fieldCache[t],o}function j(t,e){t=p.resolvePath(t);let n=null;return e?(e.componentId=t,e.contextId?(n=N(e.contextId),null!==n?n.options(e):n=k(e)):(!1===e&&(e={}),e.contextId="zuix-ctx-"+ ++z,n=k(e))):n=new a(zuix,e={},S),n.componentId!=t&&(n.componentId=t),e.ready&&(n.ready=e.ready),e.loaded&&(n.loaded=e.loaded),e.error&&(n.error=e.error),null==v[t]?(v[t]=!0,A(n,e)):(null==b[t]&&(b[t]=[]),b[t].push({c:n,o:e}),n)}function A(t,e){let n=R(t.componentId);null!==n&&null==e.controller&&null==t.controller()&&(t.controller(n.controller),i.t(t.componentId+":js","component:cached:js"));const o=function(o){!1!==e.css&&"string"!=typeof e.css?(o[t.componentId].step(t.componentId+":css"),t.loadCss({success:t=>n.css=t,error:e=>i.e(e,t),then:()=>H(t,o[t.componentId])})):H(t,o[t.componentId])};if(!e.view){if(e.html)t.view(e.html),i.t(t.componentId+":html","component:options:html");else if(null!==n&&(null!=n.view&&(t.view(n.view),i.t(t.componentId+":html","component:cached:html")),!1!==e.css&&"string"!=typeof e.css)){e.css=!1;const o=r.dom.getShadowRoot(t.container()||t.view());n.css_applied&&!o||(n.css_applied=!0,t.style(n.css),i.t(t.componentId+":css","component:cached:css"))}return"string"==typeof e.css&&(t.style(e.css),i.t(t.componentId+":css","component:options:css")),t.view()?w("resource-loader").queue(t.componentId+":css",function(){v[t.componentId]=this,o(v)},e.priority):w("resource-loader").queue(t.componentId+":html",function(){v[t.componentId]=this,t.loadHtml({cext:e.cext,success:e=>{null==n&&(n=$(t)),n.view=e,delete n.controller,o(v)},error:n=>{i.e(n,t),e.error&&t.error.call(t,n,t)}})},e.priority),t}return t.view(e.view),null==t.controller()?w("resource-loader").queue(t.componentId+":js",function(){v[t.componentId]=this,H(t,v[t.componentId])},m.length):H(t),t}function P(t){const e=zuix.dumpContexts(),n=t=>{if(t instanceof Element){const e=t;t=zuix.context(e),p.dequeue(e)}if(t){const n=e.indexOf(t);-1!==n&&e.splice(n,1),t.$.find(`[${f.zLoaded}],[shadow]`).each((e,n)=>{r.catchContextError(t,()=>{P(n)})}),r.catchContextError(t,()=>{t.dispose()})}};t&&t.each?t.each((t,e)=>n(e)):n(t)}function k(t){const e=new a(zuix,t,S);return m.push(e),e}function N(t,e){let n=null;if(t instanceof s.ZxQuery&&(t=t.get()),t instanceof Element&&t.getAttribute("shadow")&&(t=t.getAttribute("shadow")),s.each(m,(e,o)=>{if(t===o.contextId||t instanceof Element&&(o.view()===t||o.container()===t))return n=o,!1}),e){const o=t=>setTimeout(()=>{e.call(t,t)},10);if(n&&n.isReady)o(n);else if("string"==typeof t){const n=s.find(r.dom.queryAttribute(f.zContext,t));n.length()&&N(n,n=>n?o(n):N(t,e))}else t instanceof Element&&zuix.$(t).one("component:ready",function(){n=m.find(e=>e.view()===t||e.container()===t),o(n)})}return n}function S(t,e,n){y[e]&&y[e].call(t,n,t)}function R(t){let e=null;return s.each(x,(n,o)=>{if(o.componentId===t)return e=o,!1}),e}function H(t,e){if(void 0===t.options().controller&&null===t.controller())if(i.d(t.componentId,"controller:load"),e&&e.step(t.componentId+":js"),g[t.componentId])t.controller(g[t.componentId]),M(t,e);else{const n=function(e){const n=t.componentId+".js",o=zuix.store("settings")?zuix.store("settings").fetchOptions:t.options().fetchOptions||void 0;fetch(zuix.getResourcePath(n),o).then(t=>t.text()).then(e=>{try{t.controller(e,{error:e=>{t.error&&t.error.call(t,e,t)},componentId:t.componentId});let n=R(t.componentId);null==n&&(n={componentId:t.componentId,controller:t.controller()},x.push(n))}catch(n){i.e(new Error,n,e,t),t.error&&t.error.call(t,n,t)}}).catch(e=>{i.e(e,new Error,t),t.error&&t.error.call(t,e,t)}).finally(()=>{M(t,e)})};e?n(e):w("resource-loader").queue(t.componentId+":js",function(){n(v[t.componentId]=this)},t.options().priority)}else M(t,e)}function $(t){const e=t.view().innerHTML,n=s.wrapElement("div",e),o={componentId:t.componentId,view:n.innerHTML,css:t._css||t.options().css,controller:t.controller()};return x.push(o),i.t(t.componentId,"bundle:added"),o}function M(t,e){if(v[t.componentId]=null,t.view()){let n=R(t.componentId);t.options().viewDeferred?i.d(t.componentId,"component:deferred:load"):null===n?n=$(t):null==n.controller&&(n.controller=t.controller());const l=s(t.view());if(null==l.attr(f.zContext)&&l.attr(f.zContext,t.contextId),i.d(t.componentId,"component:initializing"),t.controller()){const c=t._c=new u(t);c.log=o(t.contextId);const a=()=>{e&&i.d(t.componentId,"controller:create:deferred"),function(t){const e=t.context;i.t(e.componentId,"controller:init","timer:init:start"),e.isReady=!0;const n=t.view();t.create&&r.catchContextError(e,()=>{t.create()}),t.trigger("view:create",n);(()=>{if(e.loaded&&r.catchContextError(e,()=>{e.loaded.call(e,e)}),null!=b[e.componentId]){const t=b[e.componentId];let n;for(b[e.componentId]=null;null!=t&&null!=(n=t.shift());)A(n.c,n.o)}const t=r.dom.queryAttribute(f.zLoaded,"false",r.dom.cssNot(f.zComponent));n.find(t).each(function(t,e){this.attr(f.zLoaded,null)}),setTimeout(()=>zuix.componentize(n))})(),t.trigger("component:loaded",n,!0);const o=()=>{zuix.context(n)===e&&n.find("*").each((t,o,i)=>{q(n,i)&&((t,e)=>{Array.from(e.get().attributes).forEach(o=>{let i=o.nodeValue;const r=o.nodeName;if(i&&r.startsWith("(")&&r.endsWith(")")){i.match(/^[^<>()\[\]\-+\s!?/&Â£"=^#@:;,.*|]+$/g)||(i=`(event, args) => { ${o.nodeValue} }`);const s=r.substring(1,r.length-1),l=zuix.runScriptlet(i,e,n,null);e===n?t.on(s,l):e.on(s,l)}})})(e,i)}),e.ready&&r.catchContextError(e,()=>{e.ready.call(e,e)}),t.trigger("component:ready",n,!0)},l=zuix.store("handlers"),c=e.contextId,a=n.find(':scope > [type="jscript"]');a._selection=a._selection.concat(s(document).find('[type="jscript"][for="'+c+'"]')._selection),e.handlers.refresh=(t,n,o,i)=>{if(!e._disposed){if(e._dependencyResolver&&!e._dependencyResolver.resolved())return e.$.hasClass("not-ready")||e.$.addClass("not-ready"),i(o);null!=e._dependencyResolver&&!1!==e._dependencyResolver&&(e.$.removeClass("not-ready"),e._dependencyResolver=!1);let l=e._refreshHandler;if(!l){const u="return (function($this, context, args){const $ = context.$; const model = context.model(); const trigger = (ep, ed) => context._c.trigger(ep, ed); ";let h='"use strict"; expose = {}; ';e["#"]&&s.each(e["#"],(t,e)=>{const n=r.hyphensToCamelCase(t);h+="const $"+n+' = context["#"].'+n+";",h+="const "+n+" = $"+n+".get();",h+="let _"+n+" = null; zuix.context("+n+", function(c) { _"+n+" = c; });",h+="if ("+n+") new MutationObserver((a,b) => { zuix.context("+n+", function(c) { _"+n+" = c; });}).observe("+n+',{attributes:true,attributeFilter: ["shadow"]});'}),e._?(s.each(e._,(t,e)=>{h+="const "+t+' = context["_"].'+t+";"}),void 0===e._.refresh&&(h+="function refresh() {}; "),void 0===e._.ready&&(h+="function ready() { return true; }; ")):(h+="function refresh() {}; ",h+="function ready() { return true; }; "),h+="function runScriptlet($el, s, args) { let result; try { result = eval(\"const $this = $el; const _this = zuix.context(this); \" + s) } catch (e) { if (!$el._lastError || $el._lastError.toString() !== e.toString()) { context._error = e; console.error('SCRIPTLET ERROR', e, '\\n', context, this, '\\n', s); if (context.error) context.error(e); } $el._lastError = e; }; return result };";const d=[];let p="";d.push(c),a.each((n,o,i)=>{zuix.context(t)===e&&(null!=i.attr("using")&&d.push(...i.attr("using").split(/[;|,]+/g)),i.parent().get()!==t.get()&&i.attr("for")!==c||(p+=i.html()+";",o.remove()))}),null!=e.options().using&&d.push(...e.options().using.split(/[;|,]+/g));let f="";if(d.length>0){let t="";if(d.forEach(n=>{const o=n.split(" as ");n=o[0];const i=r.hyphensToCamelCase(o[1])||r.hyphensToCamelCase(n),s="let "+i+' = window["'+i+'"]; if ('+i+' == null) { const tc = zuix.context("'+n+'"';!1!==e._dependencyResolver?f+=s+", (ctx) => "+i+" = ctx);":f+=s+");",f+="if (tc && tc.isReady) "+i+" = tc; }",t+=i+" && "}),!1!==e._dependencyResolver&&f.length>0&&(f+="const resolved = function() { return "+t+"true; };",e._dependencyResolver=Function(u+f+"; return { resolved }; }).call(this.$el.get(), this.$el, this.ctx, this.args);").call({$el:n,ctx:e,args:null}),!e._dependencyResolver.resolved()&&i))return i(o)}h+=f+p;const m=h+"; return { refresh, runScriptlet, ready, expose }; }).call(this.$el.get(), this.$el, this.ctx, this.args);";r.catchContextError(e,()=>{l=e._refreshHandler=Function(u+";"+m).call({$el:n,ctx:e,args:null}),l.expose&&Object.assign(e,l.expose)})}!e._dependencyResolver&&l.refresh&&e._refreshHandler.refresh(),i&&i(o)}};const u=[];if(n.find("*").each((o,i,r)=>{q(n,r)&&zuix.context(n)===e&&u.push(...((n,o)=>{const i=o.get(),r=[];for(let s=0;s<i.attributes.length;s++){const c=i.attributes.item(s).name;if(c.length>1&&c.startsWith("@")){const s=c.substring(1).split(":")[0];let a=e.handlers?e.handlers[s]:null;if(a||(a=l[s]),a){const e=zuix.activeRefresh(n,o,t.model(),(t,e,r,s)=>{o.attr(f.zLoad)&&"true"!==o.attr(f.zReady)?null==zuix.context(o)&&s(r):a.call(i,n,o,r,s,c)});r.push(e)}}}return r})(n,r))}),u.length>0||a.length()){const i=a.length()?a.attr("refreshdelay"):null,s=a.length()?a.attr("handlersdelay"):null;e.handlers.refresh.call(n.get(),n,n,t.model(),(t,l)=>{zuix.activeRefresh(n,n,t,(t,l,c,a)=>{if(e._refreshHandler&&!e._refreshHandler.initialized){let t=!0;u.forEach(e=>{if(null!=e.$element.attr(f.zLoad))return t=null!=zuix.context(e.$element)&&zuix.context(e.$element).isReady,t});let n=t&&!0===e.isReady;r.catchContextError(e,()=>{n=n&&e._refreshHandler.ready()},t=>{n=!1}),n?(e._refreshHandler.initialized=!0,u.forEach(t=>t.start(s)),e.$.removeClass("not-ready"),o()):e.$.hasClass("not-ready")||e.$.addClass("not-ready"),a(c,i,!0)}else null==e._error&&e.handlers.refresh.call(n.get(),n,n,c,a)}).start(i)})}else null==e._error&&(e.handlers.refresh.call(n.get(),n,n),o());i.t(e.componentId,"controller:init","timer:init:stop"),i.i(e.componentId,"component:loaded",c)}(c),e&&e.end(),l.attr(f.zReady,"true")};if(c.init){let e=!1;if(r.catchContextError(t,()=>{c.init()},t=>{a(),e=!0}),e)return}if(c.view()&&null==c.view().attr(f.zComponent)&&c.view().attr(f.zComponent,""),null==t.model()&&t.view()&&t.viewToModel(),t.options().viewDeferred){t.options().viewDeferred=!1,c.saveView(),null===n&&"default"!==t.componentId&&(n={componentId:t.componentId,controller:t.controller()},x.push(n),i.t(t.componentId,"bundle:added"),i.d(t.componentId,"component:deferred:load"));const e=()=>{!1!==t.options().html?("string"==typeof t.options().html&&(n.view=t.options().html),null==n.view?t.loadHtml({cext:t.options().cext,success:e=>{n.view=e,i.d(t.componentId,"component:deferred:html")},error:e=>{i.e(e,t),t.options().error&&t.options().error.call(t,e,t)},then:()=>{i.d(t.componentId,"controller:create:2"),a()}}):(t.view(n.view),a())):(i.d(t.componentId,"controller:create:3"),a())};!1!==t.options().css&&"string"!=typeof t.options().css?null==n.css?t.loadCss({success:e=>{n.css=e,i.d(t.componentId,"component:deferred:css")},then:()=>e()}):(t.style(n.css),e()):("string"==typeof t.options().css&&t.style(t.options().css),e())}else i.d(t.componentId,"controller:create:1"),a()}else i.w(t.componentId,"component:controller:undefined")}else i.e(t.componentId,"component:view:undefined")}function q(t,e){const n=[...I,r.dom.queryAttribute(f.zLoad)].join(",");return e.parent("pre,code,"+n).get()===t.get()}function F(t,e){let n=t=>{};if("string"==typeof t)try{const e=Function(r.normalizeControllerCode(t))();if("function"!=typeof e)throw new Error('Unexpected controller type: "'+typeof e+'"');n=e}catch(n){e&&"function"==typeof e.error&&e.error(n),i.e(this,n,t)}return n}E.prototype.field=function(t,e,n){return T.call(this,t,e,n)},E.prototype.load=function(t,e){return j.call(this,t,e)},E.prototype.unload=function(t){return P(t),this},E.prototype.loadComponent=function(t,e,n,o){return function(t,e,n,o){P(t=s(t)),t.each((t,i,r)=>{!0!==r.attr(f.zLoaded)&&!1!==r.attr(f.zLoaded)&&function(t){if(t.attr(f.zLoad,e),n&&t.attr(n,""),o&&o.lazyLoad&&"true"===o.lazyLoad.toString()||"true"===t.attr(f.zLazy))return o&&(t.get().__zuix_loadOptions=o),!1;let i=t.get().shadowRoot;if(null==i&&o&&o.container instanceof ShadowRoot?(i=o.container,o.__shadowRoot=t,delete o.container):i&&o&&delete o.container,i){const e=document.createElement("div");Array.from(t.get().attributes).forEach(n=>{if(!n.nodeName.match(/^[(#@)]/))try{e.setAttribute(n.nodeName,n.nodeValue),n.nodeName!==f.zField&&t.attr(n.nodeName,null)}catch(t){console.error(t)}}),setTimeout(()=>{for(;t.get().firstChild;)e.appendChild(t.get().firstChild);try{i.appendChild(e)}catch(t){return void console.error(t)}p.loadInline(e,o),zuix.context(e,e=>{t.attr("shadow",e.contextId)})})}else p.loadInline(t,o)}(r)})}(t,e,n,o),this},E.prototype.controller=function(t,e){return"string"==typeof t&&(e&&e.componentId&&(t+='\n//# sourceURL="'+e.componentId+'.js"\n'),t=F(t,e)),e&&e.componentId&&(g[e.componentId]=t),O.call(this,t)},E.prototype.context=function(t,e){return N.call(this,t,e)},E.prototype.trigger=function(t,e,n){return S(t,e,n),this},E.prototype.hook=function(t,e){var n,o;return n=t,(o=e)?(y[n]&&i.w("Hook override",'"'+n+'"',"OLD",y[n],"NEW",o),y[n]=o):delete y[n],this},E.prototype.using=function(t,e,n,o){e=p.resolvePath(e);const i=(t=t.toLowerCase())+"-"+e.hashCode();return w("resource-loader").queue(i,function(){const l=v[i]=this;if("component"===t){const t=N(i);null==t?zuix.load(e,{contextId:i,view:"",priority:-10,ready:t=>{l.end(),n&&n(e,t)},error:()=>{l.end(),n&&n(e,null)}}):(l.end(),n&&n(e,t))}else{const c="style"===t,a=c&&o&&r.dom.getShadowRoot(o.container()||o.view()),u=a||void 0;if(0===s(u).find(t+'[id="'+i+'"]').length()){const r=u||document.head||document.getElementsByTagName("head")[0],s=document.createElement(t);c?(s.type="text/css",s.id=i):(s.type="text/javascript",s.id=i),r.appendChild(s);const h=t=>{if(c)a&&(t=t.replace(/:root/g,":host")),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t));else{const e=window.define;window.define=void 0,s.innerText?s.innerText=t:s.appendChild(document.createTextNode(t)),window.define=window.define||e}l.end(),n&&n(e,i)},d="_res/"+t+"/"+i,p=R(d);if(null!=p)h(c?p.css:p.controller);else{const t=zuix.store("settings")?zuix.store("settings").fetchOptions:o?o.options().fetchOptions:void 0;fetch(e,t).then(t=>t.text()).then(t=>{const n={componentId:d,view:null,css:c?t:null,controller:c?null:t,using:e};x.push(n),h(t)}).catch(()=>{r.removeChild(s),l.end(),n&&n(e,null)})}}else l.end(),n&&n(e,i)}}),this},E.prototype.lazyLoad=function(t,e){return null==t?p.lazyLoad():(p.lazyLoad(t,e),this)},E.prototype.componentize=function(t){return!1===t?C=!0:!0===t&&(C=!1,t=null),C||p.componentize(t),this},E.prototype.store=function(t,e){return null!=e&&(this._store[t]=e),this._store[t]},E.prototype.getResourcePath=t=>function(t){let e=zuix.store("config");return null!=e&&null!=e[location.host]&&(e=e[location.host]),!(t=p.resolvePath(t)).startsWith("/")&&t.indexOf("://")<0&&(t=(null!=e&&null!=e.resourcePath?e.resourcePath:"")+t),t}(t),E.prototype.observable=t=>L.observable(t),E.prototype.activeRefresh=(t,e,n,o)=>new d(t,e,n,o),E.prototype.bundle=function(t,e){if(!t)return x;if(t&&"boolean"==typeof t){i.t("bundle:start");const t=p.lazyLoad();if(p.lazyLoad(!1),p.componentize(),e){const n=n=>{setTimeout(()=>{p.willLoadMore()?(i.t("bundle:wait"),n(n)):(i.t("bundle:end"),p.lazyLoad(t),e())},1e3)};n(n)}}else{for(let e=0;e<t.length;e++)t[e].css_applied&&delete t[e].css_applied,"string"==typeof t[e].controller&&(t[e].controller=F(t[e].controller));x=t}return this},E.prototype.$=s,E.prototype.TaskQueue=l,E.prototype.ObjectObserver=c,E.prototype.ZxQuery=s.ZxQuery,E.prototype.setComponentCache=t=>{x=t},E.prototype.removeCachedComponent=t=>function(t){delete g[t];const e=x.findIndex(e=>e.componentId===t);return e>=0?x.splice(e,1)[0]:null}(t),E.prototype.getCachedComponent=t=>R(t),E.prototype.dumpCache=()=>x,E.prototype.dumpContexts=()=>m,E.prototype.isDirectComponentElement=(t,e)=>q(t,e),E.prototype.resolveImplicitLoad=t=>{const e=r.dom.cssNot(f.zLoad).get(),n=r.dom.cssNot(f.zReady).get(),o=I.map(t=>t+e+n).join(",");s(t).find(o).each((t,e,n)=>{-1===e.tagName.indexOf("-")&&null==n.attr(f.zLoad)&&n.attr(f.zLoad,"default").attr(f.zLazy,"false")})},E.prototype.runScriptlet=(t,e,n,o)=>{const i=zuix.context(n);if(i&&i._refreshHandler&&e.get().isConnected)return i._refreshHandler.runScriptlet.call(e.get(),e,t,o)},E.prototype.utils=r,t.exports=()=>{if(window&&window.zuix)return window.zuix;const t=new E;if(window&&document){window.zuix=t;const e='[z-view]{display:none;}[type="jscript"],[media*="#"]{display:none;}[z-load][z-ready=true].visible-on-ready{opacity:1}[z-load]:not([z-ready=true]).visible-on-ready{opacity:0;visibility:hidden}';t.$.appendCss(e,null,"zuix-global");const n=()=>t.componentize();window.ControllerInstance=h,window.addEventListener("load",n),window.addEventListener("resize",n),window.addEventListener("pageshow",n),"loading"!==document.readyState&&n()}return i.monitor(function(e,n){t.monitor&&t.monitor(e,Array.prototype.slice.call(n))}),t}},360:function(t,e,n){"use strict";const o=n(778),i=n(374);function r(t){const e=this;Object.defineProperty(e,"context",{enumerable:!0,writable:!0,value:t}),Object.defineProperty(e,"_view",{enumerable:!1,writable:!0,value:null}),Object.defineProperty(e,"_childNodes",{enumerable:!1,writable:!0,value:[]}),Object.defineProperty(e,"saveView",{enumerable:!1,writable:!0,value:()=>{e.restoreView(),e.view().children().each((t,n)=>e._childNodes.push(n))}}),Object.defineProperty(e,"restoreView",{enumerable:!1,writable:!0,value:()=>{if(e._childNodes.length>0){let t=e.view();t.get().parentNode instanceof ShadowRoot&&(t=e.options().__shadowRoot),t&&(t.html(""),o.each(e._childNodes,(e,n)=>t.append(n))),e._childNodes.length=0}}}),Object.defineProperty(e,"on",{enumerable:!1,writable:!0}),e.on=(t,n)=>"object"==typeof t&&null==n?(o.each(t,(t,n)=>e.on(t,n)),e):(e.addEvent(t,n),e),Object.defineProperty(e,"mapEvent",{enumerable:!1,writable:!0}),e.mapEvent=(t,n,o,i)=>{null!=n&&(n.off(o,e.eventRouter),t.push({target:n,eventPath:o,handler:i}),n.on(o,e.eventRouter))},Object.defineProperty(e,"eventRouter",{enumerable:!1,writable:!0}),e.eventRouter=n=>{const o=e.view();t._behaviorMap.concat(t._eventMap).forEach(t=>{t.eventPath===n.type&&t.handler&&t.handler.call(o,n,n.detail,o)})};const n=t.options();let i=null;if(null!=n.on&&o.each(n.on,(t,n)=>t.split(/[\s|,]+/g).map(t=>e.addEvent(t,n))),null!=n.behavior)for(const t in n.behavior)n.behavior.hasOwnProperty(t)&&(i=n.behavior[t],t.split(/[\s|,]+/g).map(t=>e.addEvent(t,i)));try{if("function"==typeof(r=t.controller())&&/^\s*class\s+/.test(r.toString())){const n=new(t.controller().bind(e,e));t.controller(n)}else t.controller().call(e,e)}catch(t){console.log(t)}var r;return Object.assign(t.controller(),n.controllerMembers),e}r.prototype.using=function(t,e,n){return zuix.using(t,e,n,this.context),this},r.prototype.addEvent=function(t,e){return this.mapEvent(this.context._eventMap,this.view(),t,e),this},r.prototype.addBehavior=function(t,e){return this.mapEvent(this.context._behaviorMap,this.view(),t,e),this},r.prototype.addTransition=function(t,e,n){const r=this.context.getCssId();this.context.$.attr(r,"");const s="[z-component]["+r+"]";return o.addTransition(this.context.componentId+"@"+r,s,t,e,n,i.dom.getShadowRoot(this.context.container()||this.context.view())),this},r.prototype.field=function(t){return this.context.field(t)},r.prototype.clearCache=function(){this.context._fieldCache={}},r.prototype.view=function(t){const e=this;if((e.context.view()||e._view!==e.context.view())&&(e.clearCache(),e._view=o(e.context.view()),e._view.field=t=>e.context.field(t)),t)return e._view.find(t);if(e._view)return e._view;throw new Error("Not attached to a view yet.")},r.prototype.model=function(t){return t?(this.context.model(t),this):this.context.model()},r.prototype.options=function(){return this.context.options()},r.prototype.trigger=function(t,e,n){if(n){let n=this.context.container();n||(n=this.context.view()),n&&o(n).trigger(t,e),this.context.trigger(this.context,t,e)}else{const n=this.options().__shadowRoot;n&&n.trigger(t,e),this.view().trigger(t,e)}return this},r.prototype.expose=function(t,e){const n=this,i=(t,e)=>{e&&(e.get||e.set)?Object.defineProperty(n.context,t,e):"function"==typeof e&&"function"==typeof n[t]&&n[t]===e?n.context[t]=e.bind(n):void 0===e?delete n.context[t]:n.context[t]=e};return"object"==typeof t?o.each(t,(t,e)=>i(t,e)):i(t,e),this},r.prototype.declare=function(t,e){const n=this,i=(t,e)=>{e&&(e.get||e.set)?Object.defineProperty(n.context._,t,e):"function"==typeof e&&"function"==typeof n[t]&&n[t]===e?n.context._[t]=e.bind(n):void 0===e?delete n.context._[t]:n.context._[t]=e};return"object"==typeof t?o.each(t,(t,e)=>i(t,e)):i(t,e),this},r.prototype.loadCss=function(t){return this.context.loadCss(t),this},r.prototype.loadHtml=function(t){return this.saveView(),this.context.loadHtml(t),this},r.prototype.log={},r.prototype.for=function(t){return this},t.exports=r},374:function(t){"use strict";const e={isNoU(t){return null==t},propertyFromPath(t,e){if("string"!=typeof e||null==t)return;try{if(void 0!==t[e])return t[e]}catch(t){console.log(t)}let n=t,o="";const i=e.match(/\[(".*?"|'.*?'|(.*?))\]|".*?"|'.*?'|[0-9a-zA-Z_$]+/g);for(let t=0;t<i.length;t++){let e,r=i[t];r.startsWith("[")&&r.endsWith("]")&&(r=r.substring(1,r.length-1).trim()),(r.startsWith('"')&&r.endsWith('"')||r.startsWith("'")&&r.endsWith("'"))&&(r=r.substring(1,r.length-1)),o+=r;try{e=n[r]}catch(t){}if(void 0===e)return;n=e,o+="->"}return n},cloneObject(t){if(null===t||"object"!=typeof t)return t;let e=t;try{e=t.constructor();for(const n in t)t.hasOwnProperty(n)&&(e[n]=this.cloneObject(t[n]))}catch(t){}return e},hasPassiveEvents(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(t){}return t},hyphensToCamelCase(t){return"string"==typeof t?t.replace(/--/g,":").replace(/-([a-z0-9_$-])/g,function(t){return"_$-".indexOf(t[1])>-1||(+t[1]).toString()===t[1]?"_"+t[1].replace("-","_"):t[1].toUpperCase()}).replace(/:/g,"-"):t},camelCaseToHyphens(t){return"string"!=typeof t?t:(t=t.replace(/(^\w)|(\s+\w)/g,function(t){return t.toUpperCase()}).replace(/\s/g,"")).split(/(?=[A-Z])/).join("-").toLowerCase()},normalizeControllerCode(t){if(t.indexOf("module.exports")>=0)return"'use strict'; let module = {}; "+t+";\nreturn module.exports;";{const e=t.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\/\/.*/g,""),n=e.match(/^\s*(class|function|zuix\.controller)/m);if(!n)return t;const o=n[1],i=n.index;if("zuix.controller"===o){const e=t.indexOf("zuix.controller");return t.substring(0,e)+"return "+t.substring(e+15)}const r=e.indexOf("{",i);if(r>-1){const n=e.substring(i,r).trim();if(n){const e=t.indexOf(n);if(e>-1)return t.substring(0,e)+"return "+t.substring(e)}}return t}},catchContextError(t,e,n){try{e()}catch(e){t._error=e,n&&n(e),e&&t.options().error?t.options().error.call(t,e,t):console.error(e)}},dom:{queryAttribute(t,e,n){const o=t.split(/[\s|,]+/g);let i="";return o.forEach(function(t,r){i+=null!=e?"["+CSS.escape(t)+'="'+e+'"]':"["+CSS.escape(t)+"]",n&&(i+=n.get(r)),r<o.length-1&&(i+=",")}),i},getAttribute(t,e){let n;if("string"==typeof e&&-1!==e.indexOf(",")){const o=e.split(/[\s|,]+/g);for(let e=0;e<o.length;e++){const i=o[e],r=t.getAttribute(i);if(null!=r){n=r;break}}}else n=t.getAttribute(e);return n},setAttribute(t,e,n){if("string"==typeof e&&-1!==e.indexOf(",")){const o=e.split(/[\s|,]+/g),i=this;o.forEach(function(e){i.setAttribute(t,e,n)})}else null===n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)},cssNot(t,e){const n=t.split(",");let o="";return n.forEach(function(t,i){t.startsWith(".")?o+=":not("+t+")":o+=null!=e?":not(["+t+'="'+e+'"])':":not(["+t+"])",i<n.length-1&&(o+=",")}),i=o,{get(t){const e=i.split(",");return t>=e.length||null==t?e[0]:e[t]},getAll(){return i.split(",").join("")}};var i},getShadowRoot(t){for(;t;t=t.parentNode)if(t instanceof ShadowRoot)return t;return!1}}};t.exports=e},452:function(t,e,n){"use strict";const o=n(51),i=n(374);function r(t){const e=this._context=t;this._mutationObserver=null,this._mutationCallback=(t,n)=>{const r=i.dom.queryAttribute(o.zComponent),s=t=>{for(let e=0;e<t.attributes.length;e++)if(t.attributes[e].name.startsWith(o.cssIdPrefix))return!0};for(const n of t)"childList"===n.type&&n.addedNodes.forEach(t=>{if(t instanceof Element){let n=zuix.$(t).parent(r);if(null==n.get())return;if(!1!==e.options().css&&null==n.attr(o.resourceType.controller))n.get()!==e._container&&n.get()!==e._view||s(t)||i.dom.setAttribute(t,e.getCssId(),"");else{let e=0;do{e++,n=n.parent(r)}while(e<10&&null!=n.get()&&null!=n.attr(o.resourceType.controller));n.get()&&(n=zuix.context(n),s(t)||(i.dom.setAttribute(t,n.getCssId(),""),zuix.$(t).find("*").each(function(){this.attr(n.getCssId(),"")})))}}})}}r.prototype.start=function(){this.stop(),this._mutationObserver=new MutationObserver(this._mutationCallback),this._mutationObserver.observe(this._context._view,{attributes:!1,childList:!0,subtree:!0})},r.prototype.stop=function(){null!=this._mutationObserver&&(this._mutationObserver.disconnect(),this._mutationObserver=null)},t.exports=r},549:function(t,e,n){"use strict";const o=n(974);function i(){this.observableList=[]}function r(t){let e="";for(;t&&t.__path__;){const n=t;e=(t=t.__parents__[0])&&t.__path__?"['"+n.__path__+"']."+e:n.__path__+(e.startsWith("[")?"":".")+e}return e}function s(t){const e=[];return t.__parents__.forEach(t=>e.push(...s(t))),e.push(...t.__listeners__),e}function l(t){s(t).forEach(e=>t.unsubscribe(e))}i.prototype.observable=function(t){let e;const n=this.observableList.filter(e=>t===e.proxy||t===e.target);return 1===n.length&&(e=n[0]),null==e&&(e=new o(this,t,{context:null,get:function(t,e){if("toJSON"===e)return()=>t;if("observableTarget"===e)return t;if("Symbol(Symbol.toStringTag)"===e.toString())return;let n;try{n=t[e]}catch(t){}if(void 0===n)return;const o=[],i=this.context.observable(t);if("object"==typeof n){const t=this.context.observable(n);-1===t.__parents__.indexOf(i)&&(t.__parents__.push(i),t.__path__=e),o.push(...s(t)),n=t.proxy}else o.push(...s(i));const l=r(i)+e;return o.forEach(o=>{o.get&&o.get(t,e,n,l)}),n},set:function(t,e,n){const o=JSON.parse(JSON.stringify(t)),i=t[e];"object"==typeof i&&l(this.context.observable(i)),t[e]=n;const c=this.context.observable(t),a=r(c)+e;return s(c).forEach(i=>{i.set&&i.set(t,e,n,a,o),o[a]!==n&&i.change&&i.change(t,e,n,a,o)}),!0},deleteProperty:function(t,e){const n=t[e];return"object"==typeof n&&l(this.context.observable(n)),delete t[e]}})),e},t.exports=i},604:function(t,e,n){"use strict";const o=n(746)("TaskQueue.js");function i(t){const e=this;e._worker=null,e._taskList=[],e._requests=[],null==t&&(t=function(){}),e.taskQueue=function(n,i,r){e._taskList.push({tid:n,fn:i,status:0,priority:r,step:function(n){o.t(n,"load:step"),t(e,"load:step",{task:n})},end:function(){this.status=2,o.t(this.tid,"load:next","timer:task:stop"),t(e,"load:next",{task:this.tid}),e._taskList.splice(this.index,1),e.taskCheck(),null!=this._callback&&this._callback.call(this)},callback:function(t){this._callback=t}}),o.t(n,"task added",r,"priority"),e._taskList.sort(function(t,e){return t.priority>e.priority?1:e.priority>t.priority?-1:0}),e.taskCheck()},e.taskCheck=function(){for(let n=0;n<e._taskList.length;n++){if(0===e._taskList[n].status)return e._taskList[n].status=1,o.t(e._taskList[n].tid,"load:begin","timer:task:start"),t(e,"load:begin",{task:e._taskList[n].tid}),e._taskList[n].index=n,void e._taskList[n].fn.call(e._taskList[n]);if(1===e._taskList[n].status)return;if(2===e._taskList[n].status)return}o.t("load:end"),t(e,"load:end")}}i.prototype.callback=function(t){},i.prototype.queue=function(t,e,n){return this.taskQueue(t,e,n)},t.exports=i},612:function(t){t.exports=()=>{}},686:function(t){"use strict";function e(t,e,n,o){this.$view=t,this.$element=e,this.contextData=n,this.refreshMs=100,this.paused=!1,this.forceActive=!1;let i=!1;this.requestRefresh=(t,e,n)=>{const r=t.get()===e.get()&&null!=zuix.context(t)&&!i||e.position().visible,s=this.forceActive||!this.paused&&null!=e.parent()&&r,l=(n,o,r)=>{null!=n&&(this.contextData=n),null==o&&(o=e.attr("@delay")?+e.attr("@delay"):null),null!=o&&(this.refreshMs=o),null==r&&(r=null!=e.attr("@active")),null!=r&&(this.forceActive=r);const l=zuix.context(t);null!=l&&null==l._error&&this.refreshMs>0?(setTimeout(()=>this.requestRefresh(t,e,this.contextData),s?this.refreshMs:500),i=!0):null!=l&&null==l._error||this.stop()};s?(e._refreshActive||(e._refreshActive=!0,e.trigger("refresh:active")),o(t,e,n,(t,e,n)=>l(t,e,n))):(e._refreshActive&&(e._refreshActive=!1,e.trigger("refresh:inactive")),l(this.contextData))}}e.prototype.stop=function(){this.pause(),this.refreshMs=0,this.stopped=!0},e.prototype.start=function(t){if(this.refreshMs=t||this.refreshMs,this.started)return this.resume();this.started=!0,this.requestRefresh(this.$view,this.$element,this.contextData)},e.prototype.pause=function(){this.paused=!0},e.prototype.resume=function(){this.paused=!1},t.exports=e},746:function(t){"use strict";const e="background-color:rgba(200,200,200,0.2);";let n=null,o=null,i=null;function r(t){n=window?window.console:{},o=window||{},this._timers={},this.args=function(t,n,o){let i="%c "+n+" %c"+(new Date).toISOString()+" %c"+t;const r=[e+"color:#8a53ff;",e+"color:#777777",e+"color:#888888;"];for(let t=0;t<o.length;t++)if("string"==typeof o[t]&&0===o[t].indexOf("timer:")){const n=o[t].split(":");if(3===n.length){let t;switch(n[2]){case"start":this._timers[n[1]]=(new Date).getTime(),i+=" %cSTART "+n[1],r.push(e+"color:#999900;");break;case"stop":t=(new Date).getTime()-this._timers[n[1]],i+=" %cSTOP "+n[1]+" "+t+" ms",t>200?r.push(e+"color:#ff0000;"):t>100?r.push(e+"color:#ff7700;"):r.push(e+"color:#00aa00;")}}}i+=" \n%c ",r.push("background-color:transparent;color:inherit;");for(let t=r.length-1;t>=0;t--)Array.prototype.unshift.call(o,r[t]);Array.prototype.unshift.call(o,i),Array.prototype.push.call(o,"\n\n")},this.log=function(e,r){i&&i.call(t,e,r),(o.__zuix__debug||"ERROR"===e||"WARN"===e)&&(this.args(t,e,r),n.log(...r))}}r.prototype.monitor=function(t){i=t},r.prototype.info=function(...t){return this.log("INFO",t),this},r.prototype.i=r.prototype.l=r.prototype.log=r.prototype.info,r.prototype.warn=function(...t){return this.log("WARN",t),this},r.prototype.w=r.prototype.warn,r.prototype.error=function(...t){return this.log("ERROR",t),this},r.prototype.e=r.prototype.error,r.prototype.debug=function(...t){return this.log("DEBUG",t),this},r.prototype.d=r.prototype.debug,r.prototype.trace=function(...t){return this.log("TRACE",t),this},r.prototype.t=r.prototype.trace,t.exports=function(t){return new r(t)}},778:function(t,e,n){"use strict";const o=n(746)("TaskQueue.js"),i=n(374),r=(i.hasPassiveEvents(),[]);function s(t){!function(t,e,n){const o=h(t);h.each(r,function(){this.element===t&&this.path===e&&this.handler.call(o,n,o)})}(this,t.type,t)}function l(t,e,n){let o=1,i=-1;h.each(r,function(r){this.element===t&&this.path===e&&(o--,this.handler===n&&(i=r))}),-1!==i&&r.splice(i,1),0===o&&t.removeEventListener(e,s)}function c(t,e,n){let o=n.classes;return"string"==typeof n?(o=n.split(/[\s|,]+/g),n={}):Array.isArray(n)&&(o=n,n={}),Object.assign({type:t,classes:o,target:e},n)}function a(t){if(this._selection=[],void 0===t&&(t=document.documentElement),t instanceof a)return t;if(t instanceof HTMLCollection||t instanceof NodeList){const e=this._selection=[];h.each(t,function(t,n){e.push(n)})}else if(Array.isArray(t))this._selection=t;else if(t===window||t instanceof HTMLElement||t instanceof Node)this._selection=[t];else if("string"==typeof t)this._selection=document.documentElement.querySelectorAll(t);else if(null!==t){const e="ZxQuery cannot wrap object of this type.";throw o.e(e,typeof t,t),new Error(e)}return this}function u(t){return new a(t)}a.prototype.length=function(){return this._selection.length},a.prototype.parent=function(t){return new a(t?h.getClosest(this._selection[0],t):this._selection[0].parentNode)},a.prototype.children=function(t){return new a(t?this._selection[0].querySelectorAll(t):this._selection[0].children)},a.prototype.reverse=function(){const t=Array.prototype.slice.call(this._selection,0);return this._selection=t.reverse(),this},a.prototype.get=function(t){return t||(t=0),this._selection[t]},a.prototype.eq=function(t){const e=this._selection;let n=e[t];return arguments.length>1&&(n=[],h.each(arguments,function(t,o){null!=e[o]&&n.push(e[o])})),new a(n)},a.prototype.prev=function(){return new a(this._selection[0].previousElementSibling)},a.prototype.next=function(){return new a(this._selection[0].nextElementSibling)},a.prototype.index=function(t){const e=this._selection[0];return 1===this.length()&&null==t?Array.from(this.parent().children()._selection).indexOf(e):this.length()&&null!=t?this._selection.indexOf(t.get()):-1},a.prototype.find=function(t){return this._selection[0]?new a(this._selection[0].querySelectorAll(t)):new a},a.prototype.each=function(t){return h.each(this._selection,t),this},a.prototype.attr=function(t,e){const n=this;if("object"==typeof t)h.each(t,(t,e)=>{n.each((n,o)=>i.dom.setAttribute(o,t,e))});else{if(void 0===e)return i.dom.getAttribute(this._selection[0],t);this.each((n,o)=>i.dom.setAttribute(o,t,e))}return this},a.prototype.trigger=function(t,e){const n=new CustomEvent(t,{detail:e});return this.each(function(t,e){e.dispatchEvent(n)}),this},a.prototype.one=function(t,e){const n=this;return"object"==typeof t&&null==e?(h.each(t,(t,e)=>{n.one(t,e)}),this):(this.on(t,new function(t,e){let o=!1;return function(i,r){o||(o=!0,h(n).off(t,this),e.call(n,i,r,n))}}(t,e)),this)},a.prototype.on=function(t,e){if("object"==typeof t&&null==e){const e=this;return h.each(t,(t,n)=>e.on(t,n)),this}const n=t.split(/[\s|,]+/g)||[];let i;return e&&"function"!=typeof e&&(i=e,e=i.handler),this.each((t,l)=>n.map(t=>function(t,e,n,i){let l=!1;h.each(r,function(){if(this.element===t&&this.path===e&&this.handler===n)return o.w("Handler already registered",t,e,n),l=!0,!1}),l||(r.push({element:t,path:e,handler:n,options:i}),t.addEventListener(e,s,i))}(l,t,e,i))),this},a.prototype.off=function(t,e){if("object"==typeof t&&null==e){const e=this;return h.each(t,(t,n)=>e.off(t,n)),this}const n=t.split(/[\s|,]+/g)||[];return this.each((t,o)=>n.map(t=>l(o,t,e))),this},a.prototype.reset=function(){return this.each((t,e)=>function(t){h.each(r.slice(),function(){this.element===t&&(o.t("Removing event handler",this.element,this.path,this.handler),l(this.element,this.path,this.handler))})}(e)),this},a.prototype.isEmpty=function(){return 0===this._selection[0].innerHTML.replace(/\s/g,"").length},a.prototype.position=function(){return h.getPosition(this._selection[0])},a.prototype.css=function(t,e){if("object"==typeof t)h.each(t,(t,e)=>this.each((n,o)=>o.style[t]!==e?o.style[t]=e:null));else{if(i.isNoU(e))return this._selection[0].style[t];this.each((n,o)=>o.style[t]!==e?o.style[t]=e:null)}return this},a.prototype.addClass=function(t){const e=t.split(/[\s|,]+/g)||[];return h.each(this._selection,(t,n)=>e.map(t=>n.classList.add(t))),this},a.prototype.hasClass=function(t){return h.hasClass(this._selection[0],t)},a.prototype.removeClass=function(t){const e=t.split(/[\s|,]+/g)||[];return h.each(this._selection,(t,n)=>e.map(t=>n.classList.remove(t))),this},a.prototype.html=function(t){return i.isNoU(t)?this._selection[0].innerHTML:(this.each((e,n)=>n.innerHTML!==t?n.innerHTML=t:null),this)},a.prototype.checked=function(t){if(i.isNoU(t)){const t=this._selection[0].checked;return null!=t&&"false"!=t&&(t||"checked"==t)}return this.each((e,n)=>n.checked!==t?n.checked=t:null),this},a.prototype.value=function(t){return i.isNoU(t)?this._selection[0].value:(this.each((e,n)=>n.value!==t?n.value=t:null),this)},a.prototype.append=function(t){return"string"==typeof t?this._selection[0].innerHTML+=t:this._selection[0].appendChild(t instanceof a?t.get():t),this},a.prototype.insert=function(t,e){e=e instanceof a?e.get():e;const n=this.children().get(t);return null!==n?this._selection[0].insertBefore(e,n):this._selection[0].appendChild(e),this},a.prototype.prepend=function(t){return"string"==typeof t?this._selection[0].innerHTML=t+this._selection[0].innerHTML:this._selection[0].insertBefore(t instanceof a?t.get():t,this._selection[0].firstElementChild),this},a.prototype.detach=function(){const t=this._selection[0],e=t.parentNode;return null!=e&&(t.__zuix_oldParent=e,t.__zuix_oldIndex=Array.prototype.indexOf.call(e.children,t),e.removeChild(t),o.t("Detached from parent",e,t)),this},a.prototype.attach=function(){const t=this._selection[0];return null!=t.parentNode&&null!=t.__zuix_oldParent&&t.parentNode.removeChild(t),null==t.parentNode&&null!=t.__zuix_oldParent&&(h(t.__zuix_oldParent).insert(t.__zuix_oldIndex,t),t.__zuix_oldParent=null,delete t.__zuix_oldParent,delete t.__zuix_oldIndex),this},a.prototype.display=function(t){return i.isNoU(t)?this._selection[0].style.display:(h.each(this._selection,(e,n)=>n.style.display=t),this)},a.prototype.visibility=function(t){return i.isNoU(t)?this._selection[0].style.visibility:(h.each(this._selection,(e,n)=>n.style.visibility=t),this)},a.prototype.show=function(t){return this.display(null==t?"":t)},a.prototype.hide=function(){return this.display("none")},a.prototype.playTransition=function(t){return h.playFx(c("transition",this,t)),this},a.prototype.playAnimation=function(t){return h.playFx(c("animation",this,t)),this},a.prototype.isPlaying=function(){return this.hasClass("--z-playing")};const h=u;u.find=function(t){return h().find(t)},u.each=function(t,e){const n=null==t?0:Object.keys(t).length;if(n>0){let o=0;for(const i in t)if(t.hasOwnProperty(i)){let r=t[i];if(r instanceof Element&&(r=h(r)),!1===e.call(r,i,t[i],r))break;if(o++,o>=n)break}}return this},u.hasClass=function(t,e){const n=e.split(/[\s|,]+/g)||[];let o=!1;return h.each(n,(e,n)=>{if(o=t.classList.contains(n),o)return!1}),o},u.classExists=function(t){const e=t.split(/[\s|,]+/g)||[];let n=!1;return h.each(e,(t,e)=>{const o=document.styleSheets;if(o)for(let t=0;t<o.length;t++)try{const i=o[t].cssRules;if(null!=i)for(let t=0;t<i.length;t++)if(i[t].selectorText===e){n=!0;break}}catch(t){if("SecurityError"!==t.name&&"InvalidAccessError"!==t.name)throw t}}),n},u.wrapElement=function(t,e){const n=document.createElement(t);return"string"==typeof e?n.innerHTML=e:n.appendChild(e),n},u.wrapCss=function(t,e,n){const i=/(([a-zA-Z0-9\240-\377=:-_- \n,.@]+.*){([^{}]|((.*){([^}]+)[}]))*})/g;let r,s="";e=(e=e.replace(/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/g,"")).replace(/(?:\r\n|\r|\n)/g,"").replace(/}/g,"}\n").replace(/\{/g,"{\n");do{if(r=i.exec(e),r&&r.length>1){let e=r[2];if(null!=e&&e.length>0){e=e.replace(/\n/g,"");const o=e.split(",");let i=!1;if(h.each(o,(e,r)=>{if("."===r.trim()||":host"===r.trim())s+="\n[z-component]"+t+" ";else if("@"===r.trim()[0])s+=r+" ",(r.trim().toLowerCase().startsWith("@media")||r.trim().toLowerCase().startsWith("@supports"))&&(i=!0);else if(n)r.split(/\s+/).forEach(function(e){(e=e.trim()).lastIndexOf(".")>0?e.replace(/(?=\.)(?![^\[\]()]*(?:\[[^\[\]()]*([\])]))?([\])]))/gi,",").split(",").forEach(function(e){s+=""!==e?e+t:"\n"}):s+=""!==e&&">"!==e&&"*"!==e?"\n"+e+t+" ":e+" "});else{let e=r.trim();e=e.startsWith(":host")?e.substring(5):"\n"+e,s+="\n[z-component]"+t+e+" "}e<o.length-1&&(s=s.trim()+", ")}),i){const e=h.wrapCss(t,r[1].substring(r[2].length).replace(/^{([^\0]*?)}$/,"$1"),n);s+="{\n  "+e+"\n}\n"}else s+=r[1].substring(r[2].length)+"\n"}else o.w("z$.wrapCss was unable to parse rule.",e,r)}}while(r);return""!==s&&(e=s),e},u.appendCss=function(t,e,n,o){const i=o||document.head||document.getElementsByTagName("head")[0];let r=null;if(e&&i.contains(e))i.removeChild(e);else{const t=document.getElementById(n);t&&i.contains(t)&&i.removeChild(t)}return"string"==typeof t?(r=document.createElement("style"),r.id=n,r.appendChild(document.createTextNode(t))):t instanceof Element&&(r=t),r&&i.appendChild(r),r},u.replaceBraces=function(t,e){const n=new RegExp(/{?{.*?}?}/g);let o,i="",r=0,s=0;for(;o=n.exec(t);){if("string"==typeof o[0]&&(0===o[0].trim().length||o[0].indexOf("\n")>=0)){const e=t.substring(s,o.index)+o[0];i+=e,s+=e.length;continue}let n=o[0];if(e){const t=e(o[0]);null!=t&&(n=t,r++)}i+=t.substring(s,o.index)+n,s=o.index+o[0].length}return r>0?(i+=t.substring(s),i):null},u.getClosest=function(t,e){for(t=t.parentNode;t&&t!==document;t=t.parentNode)if(t.matches&&t.matches(e))return t;return null},u.getPosition=function(t,e){const n="--ui--visible",o=function(){let e=0,n=0;const o=t.getBoundingClientRect();let i=t;for(;i;){if("body"===i.tagName.toLowerCase()){const t=i.scrollLeft||document.documentElement.scrollLeft,o=i.scrollTop||document.documentElement.scrollTop;e+=i.offsetLeft-t+i.clientLeft,n+=i.offsetTop-o+i.clientTop}else e+=i.offsetLeft-i.scrollLeft+i.clientLeft,n+=i.offsetTop-i.scrollTop+i.clientTop;i=i.offsetParent}return{x:e,y:n,rect:o}}();o.visible=!1;const i=t=>{if(!(t instanceof Element))return document.body;const e=getComputedStyle(t);return!(t.scrollHeight>=t.clientHeight||t.scrollWidth>=t.clientWidth)||/^(visible|hidden)/.test(e.overflowY||"visible")&&/^(visible|hidden)/.test(e.overflowX||"visible")?i(t.parentElement)||document.body:t},r=i(t.parentNode);if(null!=r){let i=r.getBoundingClientRect();r===document.body&&(i={x:i.x,y:i.y,width:document.documentElement.offsetWidth||document.documentElement.clientWidth,height:document.documentElement.offsetHeight||document.documentElement.clientHeight,top:0,left:0,right:document.documentElement.clientWidth||document.documentElement.offsetWidth,bottom:document.documentElement.clientHeight||document.documentElement.offsetHeight}),null==e&&(e=0);const s=t.getBoundingClientRect();let l="none"!==getComputedStyle(t).display;if(l){l=!(s.left-1>i.right-e||s.right+1<i.left+e||s.top-1>i.bottom-e||s.bottom+1<i.top+e),r!==document.body&&(l=l&&h(r).position().visible);let n=t.parentNode;for(;n&&n instanceof Element&&l;){const t=getComputedStyle(n);l=l&&"none"!==t.display&&"hidden"!==t.visibility,n=n.parentNode}}o.visible=l,o.frame={dx:(s.left+s.width/2-i.left)/i.width,dy:(s.top+s.height/2-i.top)/i.height};const c=h(t);!l&&c.hasClass(n)?(c.removeClass(n),o.event="exit"):l?l&&(c.hasClass(n)?o.event="scroll":(o.event="enter",c.addClass(n))):o.event="off-scroll"}return o},u.addTransition=function(t,e,n,o,r,s){let l="",c=document.getElementById(t);null!=c?l=c.innerHTML:c=document.createElement("style");let a="",u="";h.each(o,(t,e)=>{t=i.camelCaseToHyphens(t),a+="  "+t+": "+e+";\n",u+=t+", "});let d="\n";return h.each(r,(t,e)=>{t=i.camelCaseToHyphens(t),d+="  transition-"+t+": "+e+";\n"}),u=u.substring(0,u.length-2)+";",l+=e+"."+n+", "+e+" ."+n+"{\n"+a+"  transition-property: "+u+d+"}\n",this.appendCss(l,c,t,s)},u.playFx=function(t){const e=this,n=h(t.target);if(0===n.length())return void o.warn("playFx: target element is undefined",t);null==t.classes?t.classes=[]:"string"==typeof t.classes&&(t.classes=t.classes.split(/[\s|,]+/g));const i=t.classes.length>1&&t.classes.shift();n.hasClass("--z-playing")||(n.addClass("--z-playing"),i&&n.addClass(i).css(t.type,"none"));const r=getComputedStyle(n.get()),s=1e3*parseFloat(r[t.type+"-delay"])||i?10:0;let l=!1;const c=()=>{l||(l=!0,t.classes.length>1?(t.onStep&&t.onStep.call(n,n,t.classes.slice(1)),e.playFx(t)):(!t.holdState&&t.classes.length>0&&n.removeClass(t.classes.shift()),n.removeClass("--z-playing"),t.onEnd&&t.onEnd.call(n,n)))},a=()=>{i&&n.css(t.type,"").removeClass(i);const e=t.classes[0];e&&n.addClass(e),t.options&&h.each(t.options,function(e,o){n.css(t.type+"-"+e,o)});const o=1+(parseFloat(r[t.type+"-iteration-count"])||0),s=1e3*parseFloat(r[t.type+"-duration"])*o;setTimeout(c,s)};n.on(t.type+"end",function(e){e.target===t.target.get()&&(n.off(t.type+"end",this),c())}),s>0?setTimeout(a,s):a()},u.ZxQuery=a,String.prototype.hashCode=function(){let t=0;if(0===this.length)return t;for(let e=0;e<this.length;e++)t=(t<<5)-t+this.charCodeAt(e),t|=0;return t},t.exports=u},974:function(t){"use strict";function e(t,e,n){Object.assign(n,{context:t}),Object.assign(this,Proxy.revocable(e,n)),this.handler=n,this.handler.context.observableList=this.handler.context.observableList||[],this.handler.context.observableList.push(this),this.target=e,this.__parents__=[],this.__listeners__=[]}e.prototype.subscribe=function(t){return this.handler.context.observableList.forEach(e=>{if(e!==this&&-1!==e.__listeners__.indexOf(t))throw new Error("Listener already registered.")}),this.__listeners__.push(t),this},e.prototype.unsubscribe=function(t){const e=this.__listeners__.indexOf(t);return-1!==e&&this.__listeners__.splice(e,1),0===this.__listeners__.length&&(this.revoke(),this.handler.context.observableList=this.handler.context.observableList.filter(t=>{if(t===this)return!1;const e=t.__parents__.indexOf(this);return-1===e||(t.__parents__.splice(e,1),0!==t.__parents__.length||0!==t.__listeners__.length)||(t.unsubscribe(null),!1)})),this},t.exports=e},979:function(t,e,n){"use strict";const o=n(51);_.prototype.componentize=function(t){return g?(s().one("componentize:step",()=>requestAnimationFrame(()=>{g=!1,y.componentize(t)})),this):(g=!0,y.trigger(this,"componentize:begin"),y.$().trigger("componentize:begin"),y.resolveImplicitLoad(t),function(t){null==t&&(t=document),l.indexOf(t)||l.push(t)}(t),v(t),this)},_.prototype.applyOptions=function(t,e){return C(t,e),this},_.prototype.loadInline=function(t,e){return w(t,e),this},_.prototype.resolvePath=function(t){return x(t)},_.prototype.willLoadMore=function(){return c.length>0||l.length>0},_.prototype.lazyLoad=function(t,e){return b(t,e)},_.prototype.dequeue=function(t){for(let e=0;e<c.length;e++)if(c[e].element===t){c.splice(e,1);break}return this},_.prototype.setHost=function(t){return y=t,this},t.exports=function(){return new _};const i=n(746)("ComponentContext.js"),r=n(374),s=n(778),l=[],c=[],a={},u=[],h=[],d=function(){return{element:null,priority:0,visible:!0,lazy:!1}},p=150;let f=!1,m=1,y=null,g=!1;function _(){}function b(t,e){return null!=t&&(f=!t),null!=e&&(m=e),!f}function v(t){!function(t){null==t&&l.length>0&&(t=l.unshift()),t instanceof s.ZxQuery&&(t=t.get());const e=r.dom.queryAttribute(o.zLoad,null,r.dom.cssNot(o.zLoaded));let n=s(t).find(e);n=Array.prototype.slice.call(n._selection);const u=[];for(let t=0;t<n.length;t++){const e=n[t];let i=+r.dom.getAttribute(e,o.zPriority);isNaN(i)&&(i=0);let s=0,l=e.parentNode,c=!1;for(;null!=l&&l!==document&&!(l instanceof ShadowRoot);){if(s++,null!=r.dom.getAttribute(l,o.zView)){c=!0;break}l=l.parentNode}if(!c){const t=new d;t.element=e,t.priority=i+1e3*s,u.push(t)}}let h=0;for(let t=0;t<u.length;t++){let e=!1;for(let n=0;n<c.length;n++)if(u[t].element===c[n].element){e=!0;break}if(!e){const e=u[t].element;C(e,r.dom.getAttribute(e,o.zOptions)),c.push(u[t]),h++}}a.queued===c.length&&a.added===h||(i.t("componentize:count",c.length,h),a.queued=c.length,a.added=h),0===h||0===l.length&&0===c.length?(y.trigger(this,"componentize:end"),y.$().trigger("componentize:end")):y.$().trigger("componentize:step"),g=!1}(t);const e=function(){c.sort(function(t,e){return t.priority-e.priority});let t=null,e=c.length>0?c.shift():null;for(;null!=e&&null!=e.element;){const n=e.element,o=I(n);if(b()&&o?(e.lazy=!0,e.visible=s.getPosition(n,m).visible):(e.lazy=!1,e.visible=!0),null!=n&&e.visible){t={item:e,cancelable:e.lazy};break}if(!(c.length>0))break;e=c.shift()}return t}();null!=e&&null!=e.item&&null!=e.item.element&&w(e.item.element)}function w(t,e){const n=s(t);if(!0===n.attr(o.zLoaded)||!1===n.attr(o.zLoaded)||n.parent("pre,code").length())return!1;n.attr(o.zLoaded,"true");let l=n.attr(o.zOptions);l?(l=z(t,l),l=r.cloneObject(l)||{}):l=null!=n.get().__zuix_loadOptions?n.get().__zuix_loadOptions:{},e&&Object.assign(l,e);const c=n.attr(o.zContext);if(c){const t=y.context(c);null!==t&&(l=t.options()),l.contextId=c}l.view||n.isEmpty()?l.view||l.container||!n.isEmpty()||null!=n.attr(o.resourceType.controller)||(l.container=t):(l.view=t,l.viewDeferred=!0);let a=n.attr(o.zLoad);if(!a)return!1;if(a=x(a),n.attr(o.zLoad,a),"default"!==a&&null!==n.attr(o.resourceType.view))n.attr(o.zComponent,null),l.controller||(l.controller=function(){});else if("default"===a||null!==n.attr(o.resourceType.controller)){l.view=l.view||t,l.viewDeferred=!0,l.html=l.html||!1,l.css=l.css||!1;const e=n.children('[media="#"]');e.length()&&e.parent().get()===n.get()&&(!1===l.css&&(l.css=""),e.each((t,e,n)=>l.css+="\n"+l.css+n.html()),e.detach()),"default"===a&&(l.controller=l.controller||function(){})}Array.from(n.get().attributes).filter(t=>t.nodeName.startsWith(":")).forEach(t=>{const e=t.nodeName.match(/[^:]+/g);let s=l;e&&e.forEach((c,a)=>{if(c=r.hyphensToCamelCase(c),a===e.length-1){let a,u=null;u=n.parent().get()instanceof ShadowRoot?l.__shadowRoot.parent(`[${o.zReady}="true"]`):n.parent(`[${o.zReady}="true"]`),u=y.context(u);try{if(u){let e=t.nodeValue;if(!e)return;const o=t.nodeName,l=o.lastIndexOf(":")<2;e.match(/^[^<>()\[\]\-+\s!?/&Â£"=^#@:;,.*|]+$/g)||(e=`(event, args) => { ${t.nodeValue} }`),(o.startsWith(":model")||l)&&(e=`(${t.nodeValue})`);try{a=y.runScriptlet(e,n,u.$,null)}catch(e){i.warn(o,t.nodeValue,e)}if(null==a)return;if(":ready"===o)return void(s.ready=a);if(":error"===o)return void(s.error=a);if(o.startsWith(":on")||o.startsWith(":behavior")){if(l)return void(s.on=a);const t=o.substring(o.indexOf(":",1)+1);((o.startsWith(":behavior")?s.behavior:s.on)||{})[t]=a}else if(o.startsWith(":model")){if(l)return void(s.model=a);const t=o.match(/[^:]+/g).splice(1);let e=s.model||{};t.forEach((n,o)=>{if(n=r.hyphensToCamelCase(n),o===t.length-1)return e[n]=a;e=e[n]=e[n]||{}})}}else a=Function("return "+t.nodeValue+";")()}catch(n){i.warn(e.join(":"),c,t.nodeValue,n)}return s[c]=a}s=s[c]=s[c]||{}})});const u=n.attr(o.zOn);u&&(l.on=z(t,u));const h=n.attr(o.zCss);h&&(l.css=z(t,h));const d=n.attr(o.zBehavior);d&&(l.behavior=z(t,d));const p=n.attr(o.zModel);p&&(l.model=z(t,p));const f=n.attr(o.zUsing);f&&(l.using=f);const m=n.attr(o.zPriority);return m&&(l.priority=+m),y.load(a,l),!0}function x(t){if("@"===t[0]){let e=y.store("config"),n="https://zuixjs.github.io/zkit/lib/1.2/";if(null!=e&&null!=e[location.host]&&(e=e[location.host]),null!=e)switch(typeof e.libraryPath){case"object":s.each(e.libraryPath,(e,o)=>!t.startsWith(e+"/")||(n=o,!1));break;case"string":n=e.libraryPath}t=n+t.substring(t.indexOf("/")+1)}return t}function z(t,e){if("string"==typeof e){const n=s(t).parent(r.dom.queryAttribute(o.zLoad));if(n.get()){const o=y.context(n);try{return o._refreshHandler.runScriptlet(t,`[${e}][0]`)}catch(t){}}e=e.trim().startsWith("{")&&e.trim().endsWith("}")?Function("return "+e)():r.propertyFromPath(window,e)}return e}function C(t,e){e=z(t,e),t&&e&&(e.componentId&&r.dom.setAttribute(t,o.zLoad,e.componentId.toString().toLowerCase()),e.contextId&&r.dom.setAttribute(t,o.zContext,e.contextId.toString().toLowerCase()),e.lazyLoad&&r.dom.setAttribute(t,o.zLazy,e.lazyLoad.toString().toLowerCase()))}function L(t){const e={element:t};return u.push(e),e}function I(t){const e=s(t),n=e.parent(`[${o.zLazy}]`);if("false"===e.attr(o.zLazy)||n.length()&&"false"===n.attr(o.zLazy))return!1;if(function(t){for(let e=0;e<u.length;e++){const n=u[e];if(n.element===t)return n}return null}(t))return!0;{const n=r.dom.queryAttribute(o.zLazy,"scroll")+","+r.dom.queryAttribute(o.zLazy,"true"),i=e.parent(),l=i.length()?i.parent(n).get():null;if(l){L(t);let e=function(t){for(let e=0;e<h.length;e++){const n=h[e];if(n.element===t)return n}return null}(l);return e||(e=function(t){const e={element:t};return h.push(e),e}(l),"scroll"===r.dom.getAttribute(l,o.zLazy)&&function(t,e){let n,o=(new Date).getTime();s(e===document.body?window:e).on("scroll",()=>{const t=(new Date).getTime();t-o>p?(o=t,v(e)):(clearTimeout(n),n=setTimeout(()=>v(e),100))})}(0,l)),!0}if("true"===e.attr(o.zLazy))return L(t),!0}return!1}}},e={},n=function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}(157);zuix=n}();